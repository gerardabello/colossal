<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
	<title>How Colossal works</title>
  <link rel="stylesheet" type="text/css" href="howitworks.css">
</head>
<body>
    <h1>How Colossal works</h1>
    <p>Colossal is a subtractive synthesizer. Here I will not explain the basics of sound synthesis, only the specific design of this synthesizer.</p>
    <h2>Voice</h2>
    <p>The sound Colossal outputs is a combination of voices. In polyphony (multiple notes at the same time), each voice is a note. In monophony, a single voice plays all notes, one at a time.</p>
    <img src="main.png" alt="Structure of a single voice">
    <p>It has a simple structure. The same note is sent to two oscillators, their outputs get mixed, and then the signal goes through a filter and a gain, both controlled by it's own envelope.</p>
    <h2>Oscillators</h2>
    The basic shape of the wave from each oscillator is controled by a single value called 'shape'.



    <h2>Mixer</h2>
    A mixer is a node that has 2 input waves and outputs the weighted sum of them. The weights always add up to 1. As it only has one degree of freedom we can control it with only one parameter we can call 'mix'. The naive implementation would be to create two gain nodes, and assign one gain to 'mix' and the other one to '1-mix' each time the parameter changed. The only problem with this is that you cannot use exponentialRampToValueAtTime() to control it.

    <h2>Envelopes</h2>
    <p>The envelopes use the exponentialRampToValueAtTime() function to create a typical ADSR envelope shape. The only problem is that if the note finishes before the attack or decay phase, we dont know the last output of the envelope. We need that value because the release phase starts at the last value (the envelope must be continuous). To obtain that value it uses an analyser node. It is not pretty, but at the moment I am not aware of any method to obtain the current value during an exponentialRampToValueAtTime().
    <h2>Polyphony</h2>

</body>
</html>
