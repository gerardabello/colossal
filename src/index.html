<!DOCTYPE html>
<html>

  <head>
    <title>Analo-sizer (analog-style synthesizer)</title>
    <meta charset="UTF-8" />
    <title>Analosizer</title>
    <style>
      .panel {
        display: block;
        position: relative;
        float: left;
        background-color: #def;
        border: solid 1px #cde;
        border-radius: 0.375em;
        padding: 0.5em;
      }
      .panel-section {
        border-radius: 0.375em;
      }
      .instrument {
        background-color: #f0f7ff;
        border: solid 1px #d7e0e7;
        border-radius: 0.5em;
      }
      .control + .control {
        margin-left: 1em;
      }
      input {
        width: 4em;
      }
      input[type=radio] {
        width: auto;
      }
      input[type=range] {
        min-width: 30em;
      }
      #init-focus {
        display: block;
        float: right;
        height: 1px;
        width: 1px;
        margin: 0 0 -1px 0;
        overflow: hidden;
      }
      .controller {
        position: relative;
      }
      .controller-key {
        position: relative;
        display: inline-block;
        vertical-align: top;
        border: solid 1px black;
        text-align: center;
      }
      .controller-key.white-key {
        background-color: white;
        color: black;
        width: 2em;
        height: 5em;
        margin: 0.5em 0.075em;
      }
      .controller-key.black-key {
        background-color: black;
        color: white;
        width: 1.5em;
        height: 2.5em;
        margin: 0.5em -0.7875em;
        z-index: 1;
      }
      .controller-key .control-label {
        position: absolute;
        width: 100%;
        left: 0;
        bottom: 0;
        line-height: 2em;
      }
      .text-key-control {
        display: inline-block;
        position: relative;
        border: solid 1px black;
        width: 2em;
        height: 2em;
        margin: 0 0.075em;
        vertical-align: top;
      }
      .text-key-control.white-key {
        background-color: white;
        color: black;
        margin-top: 2.25em;
      }
      .text-key-control.black-key {
        background-color: black;
        color: white;
        margin: 0 -1.0375em;
      }
      .text-key-control .control-label {
        display: block;
        width: 100%;
        line-height: 1.875em;
        text-align: center
      }
      .project-info {
        float: left;
        margin-top: 0.75em;
        margin-right: 1em;
      }
      .version {
        display: block;
        float: right;
        margin-top: 0.75em;
      }
    </style>
  </head>

  </body>

    <h1>Analo-sizer (analog-style synthesizer)</h1>

    <div id='app-container'>
    </div>

    <script id='app-template' type='text/html+ractive'>
<div
  class='panel'
  on-keydown='noteOnForTextKey'
  on-keyup='noteOffForTextKey'
>
  <a id='init-focus' href='javascript:void(0)' autofocus='autofocus'>-</a>

  {{#engine}}
    <fieldset class='panel-section'>
      <legend>Global</legend>

      <fieldset class='instrument'>
        <legend>Volume</legend>

        <span class='control'>
          <input
            id='global-volume'
            type='range'
            min='-36' max='0' step='1'
            value='{{outputGain.level_dB}}'
          />
          <input
            type='number'
            step='any'
            value='{{outputGain.level_dB}}'
          />
        dB
        <span>
      </fieldset>
    </fieldset>

    {{#voicing}}
      <fieldset class='panel-section'>
        <legend>Voicing</legend>

        <fieldset class='instrument'>
          <legend>Waveform</legend>

          <span class='control'>
            <input
              id='voicing-waveform-sine'
              type='radio'
              name='{{waveformType}}'
              value='sine'
            >
            <label for='voicing-waveform-sine'>Sine</label>
          </span
          ><span class='control'>
            <input
              id='voicing-waveform-square'
              type='radio'
              name='{{waveformType}}'
              value='square'
              accesskey='x'
            >
            <label for='voicing-waveform-square'>Square</label>
          </span
          ><span class='control'>
            <input id='voicing-waveform-sawtooth' type='radio' name='{{waveformType}}' value='sawtooth'>
            <label for='voicing-waveform-sawtooth'>Sawtooth</label>
          </span
            ><span class='control'>
            <input id='voicing-waveform-triangle' type='radio' name='{{waveformType}}' value='triangle'>
            <label for='voicing-waveform-triangle'>Triangle</label>
          </span>
        </fieldset>
      </fieldset>
    {{/voicing}}
  {{/engine}}

  <div class='controller' id='controller-keyboard'>
    {{>controllerKey { keyType: 'white', label: 'C',  noteNum: 60 }
  }}{{>controllerKey { keyType: 'black', label: 'C♯', noteNum: 61 }
  }}{{>controllerKey { keyType: 'white', label: 'D',  noteNum: 62 }
  }}{{>controllerKey { keyType: 'black', label: 'D♯', noteNum: 63 }
  }}{{>controllerKey { keyType: 'white', label: 'E',  noteNum: 64 }
  }}{{>controllerKey { keyType: 'white', label: 'F',  noteNum: 65 }
  }}{{>controllerKey { keyType: 'black', label: 'F♯', noteNum: 66 }
  }}{{>controllerKey { keyType: 'white', label: 'G',  noteNum: 67 }
  }}{{>controllerKey { keyType: 'black', label: 'G♯', noteNum: 68 }
  }}{{>controllerKey { keyType: 'white', label: 'A',  noteNum: 69 }
  }}{{>controllerKey { keyType: 'black', label: 'A♯', noteNum: 70 }
  }}{{>controllerKey { keyType: 'white', label: 'B',  noteNum: 71 }
  }}{{>controllerKey { keyType: 'white', label: 'C',  noteNum: 72 }
  }}{{>controllerKey { keyType: 'black', label: 'C♯', noteNum: 73 }
  }}{{>controllerKey { keyType: 'white', label: 'D',  noteNum: 74 }
  }}{{>controllerKey { keyType: 'black', label: 'D♯', noteNum: 75 }
  }}{{>controllerKey { keyType: 'white', label: 'E',  noteNum: 76 }
  }}
  </div>
  <div class='controller' id='text-key-controls'>
    {{>textKeyControl { keyType: 'white', label: 'A',  noteNum: 60 }
  }}{{>textKeyControl { keyType: 'black', label: 'W',  noteNum: 61 }
  }}{{>textKeyControl { keyType: 'white', label: 'S',  noteNum: 62 }
  }}{{>textKeyControl { keyType: 'black', label: 'E',  noteNum: 63 }
  }}{{>textKeyControl { keyType: 'white', label: 'D',  noteNum: 64 }
  }}{{>textKeyControl { keyType: 'white', label: 'F',  noteNum: 65 }
  }}{{>textKeyControl { keyType: 'black', label: 'T',  noteNum: 66 }
  }}{{>textKeyControl { keyType: 'white', label: 'G',  noteNum: 67 }
  }}{{>textKeyControl { keyType: 'black', label: 'Y',  noteNum: 68 }
  }}{{>textKeyControl { keyType: 'white', label: 'H',  noteNum: 69 }
  }}{{>textKeyControl { keyType: 'black', label: 'U',  noteNum: 70 }
  }}{{>textKeyControl { keyType: 'white', label: 'J',  noteNum: 71 }
  }}{{>textKeyControl { keyType: 'white', label: 'K',  noteNum: 72 }
  }}{{>textKeyControl { keyType: 'black', label: 'O',  noteNum: 73 }
  }}{{>textKeyControl { keyType: 'white', label: 'L',  noteNum: 74 }
  }}{{>textKeyControl { keyType: 'black', label: 'P',  noteNum: 75 }
  }}{{>textKeyControl { keyType: 'white', label: ';',  noteNum: 76 }
  }}
  </div>

  <span class='project-info'>
    Project home: <a href='https://github.com/stevecj/analo-sizer'>
    https://github.com/stevecj/analo-sizer
    </a>
  </span>
  <span class='version'>
    v{{version}}
  </span>
</div>

{{#partial controllerKey}}<a
  class='controller-key {{keyType}}-key'
  href='javascript:void(0)'
  on-mousedown='noteOn:{{noteNum}}'
  on-mouseup='noteOff:{{noteNum}}'
>
  <span class='control-label'>{{label}}</span>
</a>{{/partial}}

{{#partial textKeyControl}}<a
  class='text-key-control {{keyType}}-key'
  href='javascript:void(0)'
  on-mousedown='noteOn:{{noteNum}}'
  on-mouseup='noteOff:{{noteNum}}'
>
  <span class='control-label'>{{label}}</span>
</a>{{/partial}}
    </script>

    <script src='./analosizer.js'></script>

    <script>
      var analosizer;

      window.addEventListener( 'load', function() {
        analosizer = new Analosizer({
            ui: {
                containerSelector: '#app-container'
              , templateSelector:  '#app-template'
            }
        });
      });
    </script>
  </body>

</html>
